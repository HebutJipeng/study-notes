## 目的
实现伸缩性和高可用

## 方式
1. 轮训法
2. 加权轮训法
3. 最少连接法
4. 加权最小连接数
5. 随机算法
6. 源地址哈希法
     源地址哈希的思想是根据获取客户端的IP地址，通过哈希函数计算得到的一个数值，用该数值对服务器列表的大小进行取模运算，得到的结果便是客服端要访问服务器的序号。采用源地址哈希法进行负载均衡，同一IP地址的客户端，当后端服务器列表不变时，它每次都会映射到同一台后端服务器进行访问。

## 转发方式
1. Http重定向
    将重定向后的地址写入Header，让客户端再次发起请求。
2. DNS
    在域名解析的同时，根据负载均衡的规则计算服务器ip地址
3.反向代理
    通过反向代理代替服务器接收请求，再进行数据转发
4.网络层
    通过操作系统内核截取网络数据包，根据负载均衡算法计算源服务器ip地址，进行转发
5. 链路层
    通过负载均衡算法在链路层进行计算MAC地址，修改请求的目标MAC地址实现数据转发。配置源服务器虚拟ip与负载均衡服务器的ip一致，可以不修改ip即可实现转发。避免负载均衡服务器的过载。使用最广（例如LVS）。

## 实现方式
1. pm2 来实现负载均衡
    - 内建负载均衡（使用Node cluster 集群模块、子进程，可以参考朴灵的《深入浅出node.js》一书第九章）
    线程守护，keep alive
    - 0秒停机重载，维护升级的时候不需要停机.
    - 现在 Linux (stable) & MacOSx (stable) & Windows (stable).多平台支持
    - 停止不稳定的进程（避免无限循环）
    - 控制台检测
    - 提供 HTTP API
    - 远程控制和实时的接口API ( Nodejs 模块,允许和PM2进程管理器交互 )
2. supervisor + nginx 反向代理来实现